ターミナル実行
gcloud auth login
gcloud config set project "sunspira"
gcloud services enable run.googleapis.com artifactregistry.googleapis.com cloudbuild.googleapis.com secretmanager.googleapis.com aiplatform.googleapis.com workflows.googleapis.com iam.googleapis.com

# FastAPIバックエンドAPI用のサービスアカウント
gcloud iam service-accounts create backend-api-sa --display-name="SUNSPIRA Backend API SA"

# Celery非同期ワーカー用のサービスアカウント
gcloud iam service-accounts create celery-worker-sa --display-name="SUNSPIRA Celery Worker SA"

# Next.jsフロントエンド用のサービスアカウント
gcloud iam service-accounts create frontend-sa --display-name="SUNSPIRA Frontend SA"


mongodb
youshinh@gmail.com
FYnYAFz34YlNeSns

sunspira_user
aKM7KEDeYgv1n0jd

# "your-mongodb-connection-string" の部分を、
# 実際に使用するMongoDB Atlasの接続文字列に置き換えてください。
# 実行すると、文字列の入力を求められます。
# 接続文字列雛形
mongodb+srv://<db_username>:<db_password>@cluster0.3q5szia.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0

実際の接続文字列
mongodb+srv://sunspira_user:aKM7KEDeYgv1n0jd@cluster0.3q5szia.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0

# "mongodb+srv://..." の部分を、あなたがコピーしてパスワードを編集した文字列に置き換えます
echo -n "mongodb+srv://sunspira_user:aKM7KEDeYgv1n0jd@cluster0.3q5szia.mongodb.net/?retryWrites=true&w=majority" | gcloud secrets create sunspira-mongo-connection-string --data-file=- --replication-policy="automatic"

# "sunspira-repo" という名前のDockerリポジトリを作成します
# リージョンは "us-central1" を例としていますが、お好きなリージョンに変更可能です
gcloud artifacts repositories create sunspira-repo --repository-format=docker --location=us-central1 --description="Docker repository for SUNSPIRA project"

# GitHubリポジトリの準備も完了


create
sunspira/
├── backend/      # FastAPI, Celery, ADKなどバックエンドのコードをすべて格納
└── frontend/     # Next.jsのフロントエンドのコードをすべて格納

cd backend
# 仮想環境を作成 (venvという名前のフォルダができます)
python -m venv venv

# 仮想環境を有効化 (Windowsの場合)
.\venv\Scripts\activate

pip install "fastapi[all]" "celery[redis]" "beanie" "motor" "python-dotenv" "google-cloud-aiplatform" "google-adk"

pip freeze > requirements.txt


backend/
├── sunspira/              # メインのアプリケーションコードを入れるフォルダ
│   ├── __init__.py        # このフォルダをPythonパッケージとして認識させるための空ファイル
│   ├── main.py            # FastAPIアプリケーションのエントリーポイント
│   ├── tasks.py           # Celeryの非同期タスクを定義するファイル
│   ├── models.py          # データベースのスキーマ(モデル)を定義するファイル
│   └── agents/            # ADKで作成するAIエージェントを格納するフォルダ
│       ├── __init__.py
│       └── personal_agent.py
├── .gitignore             # Gitの追跡から除外するファイルを指定
├── Dockerfile             # 本番環境用のコンテナを作成するための設計図
└── venv/                  # (作成済みの仮想環境)

# frontendフォルダに移動
cd frontend

# . は「現在のフォルダに作成する」という意味です
npx create-next-app@latest .
いくつか質問されますが、以下のように答えるのがおすすめです。

Would you like to use TypeScript? Yes
Would you like to use ESLint? Yes
Would you like to use Tailwind CSS? Yes
Would you like to usesrc/directory? No
Would you like to use App Router? Yes
turbopack? yes
Would you like to customize the default import alias? No

npm install zustand react-flow

